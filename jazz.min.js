!function(){var t,e=this;t="undefined"!=typeof exports?exports:e.Jazz={},t.$=e.jQuery,t.VERSION="0.5",t.init=function(e,i){console.log("about to"),JazzConfig.configureFromOptions(e),t.leapController=new Leap.Controller({enableGestures:!0}),t.canvas=JazzUI.appendCanvasToDOM(),JazzUI.createFingerCanvas(),t.leapController.loop(function(t){JazzEvents.loop(t)}),i&&i()},t.show=function(){JazzUI.show()},t.hide=function(){JazzUI.showUI=!1},t.clearFingersText=function(){JazzUI.clearFingersText()},t.setFingersText=function(t){JazzUI.setFingersText(t)},t.on=function(e,i){t.event[e]=i}}.call(this),function(){var t,e=this;t="undefined"!=typeof exports?exports:e.JazzHands={},console.log("Loaded JazzHands."),t.getFingersMap=function(t){return Jazz.lastFrame.pointablesMap?t?Jazz.lastFrame.pointablesMap[t]:Jazz.lastFrame.pointablesMap:void 0},t.getFinger=function(e){return t.getFingersMap(e)},t.getRadiusForFinger=function(t){return Math.min(600/Math.abs(t[2]),20)*Jazz.CIRCLE_RADIUS},t.getYForCoords=function(e){return-e[1]-120-t.getRadiusForFinger(e)/2},t.getXForCoords=function(e){return parseInt(e[0]-900-t.getRadiusForFinger(e)/2)},t.getCapturedDigits=function(){return Jazz.frameDigitCount},t.isNewFingerCount=function(){return 0===t.getCapturedDigits()||Jazz.lastDigitsFound!==t.getCapturedDigits()},t.isHoldingFinger=function(){return t.getCapturedDigits()>0&&1==t.isNewFingerCount()},t.isValidFinger=function(){return t.getCapturedDigits()>0&&t.getCapturedDigits()<=Jazz.LAST_VALID_FINGER},t.isHoldingValidFinger=function(){return(t.isHoldingFinger()&&t.isValidFinger())===!0},t.hasDetectedHand=function(){return Jazz.hands.length>0},t.isNewHandMotion=function(){return Jazz.handNavigation!==JazzUI.getDetectedNav()},t.getFirstFingerPos=function(){for(var e in t.getFingersMap())return t.getFingersMap(e).tipPosition},t.getHandPos=function(e){return Jazz.hands.length<=0?void 0:0===e?t.getXForCoords(Jazz.hands[0].palmPosition):t.getYForCoords(Jazz.hands[0].palmPosition)},t.getHandPosX=function(){return t.getHandPos(0)},t.getHandPosY=function(){return t.getHandPos(1)},t.palm=function(t){if(0!==Jazz.hands.length){var e=Jazz.hands[0];return"horizontal"===t?e.palmPosition[0]:"vertical"===t?e.palmPosition[1]:"depth"===t?e.palmPosition[2]:void 0}},t.isNewHand=function(){return Jazz.lastHandId==Jazz.hands[0].id}}(),function(){var t,e=this;t="undefined"!=typeof exports?exports:e.JazzUI={},console.log("Loaded JazzUI."),t.createFingerCanvas=function(){var e=Jazz.canvas;t.getContext().translate(1.2*e.width,e.height),t.getContext().globalAlpha=Jazz.opacity;var e=Jazz.blurredCanvas;t.getBlurredContext().translate(1.2*e.width,e.height),t.getBlurredContext().globalAlpha=Jazz.opacity},t.show=function(){Jazz.showUI=!0},t.hide=function(){Jazz.showUI=!1},t.clearFingersText=function(){Jazz.fingersText=[],Jazz.disableFingers=!1,Jazz.LAST_VALID_FINGER=1},t.showCanvas=function(){Jazz.showUI===!0&&(document.getElementById("jazz-fingers").style.display="block",document.getElementById("jazz-fingers-shadow").style.display="block")},t.hideCanvas=function(){document.getElementById("jazz-fingers").style.display="none",document.getElementById("jazz-fingers-shadow").style.display="none"},t.updateCanvas=function(){t.clearCanvas();var e=0;for(var i in JazzHands.getFingersMap()){var n=++e===Jazz.lastFrame.fingers.length,a=Jazz.timerPercentage>10&&n,o=JazzHands.getFinger(i).tipPosition;if(Jazz.simpleMode===!0&&Jazz.hands.length>0&&(o=Jazz.hands[0].palmPosition),t.drawCircle(o),Jazz.disableHelper===!1&&t.drawHelperArrows(),Jazz.disableTimer===!1&&t.drawTimerArc(o,Jazz.timerPercentage),a&&Jazz.disableFingers===!1&&t.drawFingerText(),Jazz.simpleMode===!0)return}},t.setFingersText=function(t){t?(Jazz.fingersText=t,Jazz.disableFingers=!1,Jazz.LAST_VALID_FINGER=t.length+1):Jazz.clearFingersText()},t.clearCanvas=function(){var e=Jazz.canvas;t.getContext().clearRect(1.2*-e.width,-e.height,1.2*e.width,e.height),t.getBlurredContext().clearRect(1.2*-e.width,-e.height,1.2*e.width,e.height)},t.drawCircle=function(e){0===Jazz.timerPercentage&&(t.getContext().beginPath(),t.getContext().arc(JazzHands.getXForCoords(e),JazzHands.getYForCoords(e),JazzHands.getRadiusForFinger(e),0,2*Math.PI),t.getContext().fill(),t.getBlurredContext().beginPath(),t.getBlurredContext().arc(JazzHands.getXForCoords(e),JazzHands.getYForCoords(e),JazzHands.getRadiusForFinger(e),0,2*Math.PI),t.getBlurredContext().fill())},t.drawHelperArrows=function(){t.getContext().drawImage(Jazz.upHelperArrow,JazzHands.getHandPosX()-17,-390),t.getContext().drawImage(Jazz.rightHelperArrow,-820,JazzHands.getHandPosY()-15),t.getContext().drawImage(Jazz.leftHelperArrow,-1030,JazzHands.getHandPosY()-15),t.getContext().drawImage(Jazz.downHelperArrow,JazzHands.getHandPosX()-17,-215),t.getBlurredContext().drawImage(Jazz.upHelperArrow,JazzHands.getHandPosX()-17,-390),t.getBlurredContext().drawImage(Jazz.rightHelperArrow,-820,JazzHands.getHandPosY()-15),t.getBlurredContext().drawImage(Jazz.leftHelperArrow,-1030,JazzHands.getHandPosY()-15),t.getBlurredContext().drawImage(Jazz.downHelperArrow,JazzHands.getHandPosX()-17,-215)},t.drawUpArrow=function(){t.getContext().drawImage(Jazz.upArrow,JazzHands.getHandPosX()-17,JazzHands.getHandPosY()-15),t.getBlurredContext().drawImage(Jazz.upArrow,JazzHands.getHandPosX()-17,JazzHands.getHandPosY()-15)},t.drawDownArrow=function(){t.getContext().drawImage(Jazz.downArrow,JazzHands.getHandPosX()-17,JazzHands.getHandPosY()-15),t.getBlurredContext().drawImage(Jazz.downArrow,JazzHands.getHandPosX()-17,JazzHands.getHandPosY()-15)},t.drawLeftArrow=function(){t.getContext().drawImage(Jazz.leftArrow,JazzHands.getHandPosX()-17,JazzHands.getHandPosY()-15),t.getContext().drawImage(Jazz.leftArrow,JazzHands.getHandPosX()-17,JazzHands.getHandPosY()-15)},t.drawRightArrow=function(){t.getContext().drawImage(Jazz.rightArrow,JazzHands.getHandPosX()-14,JazzHands.getHandPosY()-15),t.getBlurredContext().drawImage(Jazz.rightArrow,JazzHands.getHandPosX()-14,JazzHands.getHandPosY()-15)},t.drawZoomInIcon=function(){t.getContext().drawImage(Jazz.zoomIn,JazzHands.getHandPosX()-24,JazzHands.getHandPosY()-20),t.getBlurredContext().drawImage(Jazz.zoomIn,JazzHands.getHandPosX()-24,JazzHands.getHandPosY()-20)},t.drawZoomOutIcon=function(){t.getContext().drawImage(Jazz.zoomOut,JazzHands.getHandPosX()-19,JazzHands.getHandPosY()-20),t.getBlurredContext().drawImage(Jazz.zoomOut,JazzHands.getHandPosX()-19,JazzHands.getHandPosY()-20)},t.canDrawHandUp=function(){return JazzHands.palm("vertical")>JazzConfig.threshold("up")?(t.drawUpArrow(),!0):!1},t.canDrawHandDown=function(){return JazzHands.palm("vertical")<JazzConfig.threshold("down")?(t.drawDownArrow(),!0):!1},t.canDrawHandLeft=function(){return JazzHands.palm("horizontal")<JazzConfig.threshold("left")?(t.drawLeftArrow(),!0):!1},t.canDrawHandRight=function(){return JazzHands.palm("horizontal")>JazzConfig.threshold("right")?(t.drawRightArrow(),!0):!1},t.canDrawZoomIn=function(){return JazzHands.palm("depth")<JazzConfig.threshold("zoomIn")&&Jazz.disableZoom===!1?(t.drawZoomInIcon(),!0):!1},t.canDrawZoomOut=function(){return JazzHands.palm("depth")>JazzConfig.threshold("zoomOut")&&Jazz.disableZoom===!1?(t.drawZoomOutIcon(),!0):!1},t.appendCanvasToDOM=function(){var e=t.createBaseCanvas(!1,"jazz-fingers"),i=t.createBaseCanvas(!0,"jazz-fingers-shadow");return Jazz.blurredCanvas=i,document.body.appendChild(i),document.body.appendChild(e),e},t.createBaseCanvas=function(e,i){var n=document.createElement("canvas"),a=.9*document.body.clientWidth,o="position:absolute;top:105px;left:-25px;";return 1e3>a&&(a=1050),e&&(o+=t.blurStyle()),n.setAttribute("id",i),n.setAttribute("style",o),n.setAttribute("width",a+"px"),n.setAttribute("height","410px"),n},t.blurStyle=function(){return"-webkit-filter: blur(10px);-moz-filter: blur(10px);-o-filter: blur(10px);-ms-filter: blur(10px)filter: blur(10px);"},t.drawText=function(e,i,n){e&&(t.getContext().clearRect(0,0,Jazz.canvas.width,Jazz.canvas.height),t.getContext().font="bold 22pt Arial",t.getContext().fillStyle=Jazz.fillStyle,t.getContext().strokeStyle="white",t.getContext().fillText(e,i,n-30),t.getBlurredContext().clearRect(0,0,Jazz.canvas.width,Jazz.canvas.height),t.getBlurredContext().font="bold 22pt Arial",t.getBlurredContext().fillStyle=Jazz.fillStyle,t.getBlurredContext().strokeStyle="white",t.getBlurredContext().fillText(e,i,n-30))},t.getTimerPercentage=function(){return Jazz.timerPercentage=parseInt(100*(Jazz.incr/Jazz.WAIT_FINGER_MS)),Jazz.timerPercentage},t.drawFingerText=function(){Jazz.frameDigitCount===Jazz.FIRST+1?t.drawText(Jazz.fingersText[Jazz.FIRST],JazzHands.getHandPosX(),JazzHands.getHandPosY()):Jazz.frameDigitCount===Jazz.SECOND+1?t.drawText(Jazz.fingersText[Jazz.SECOND],JazzHands.getHandPosX(),JazzHands.getHandPosY()):Jazz.frameDigitCount===Jazz.THIRD+1?t.drawText(Jazz.fingersText[Jazz.THIRD],JazzHands.getHandPosX(),JazzHands.getHandPosY()):Jazz.frameDigitCount===Jazz.FOURTH+1&&t.drawText(Jazz.fingersText[Jazz.FOURTH],JazzHands.getHandPosX(),JazzHands.getHandPosY())},t.drawTimerArc=function(e,i){5>i||(radius=2*.01*i*Math.PI,t.getContext().beginPath(),t.getContext().arc(JazzHands.getXForCoords(e),JazzHands.getYForCoords(e),30,0,radius),t.getContext().lineWidth=10,t.getContext().strokeStyle="green",t.getContext().stroke(),t.getBlurredContext().beginPath(),t.getBlurredContext().arc(JazzHands.getXForCoords(e),JazzHands.getYForCoords(e),30,0,radius),t.getBlurredContext().lineWidth=10,t.getBlurredContext().strokeStyle="green",t.getBlurredContext().stroke())},t.getDetectedNav=function(){var e=!1;return t.canDrawHandLeft()?e="left":t.canDrawHandRight()?e="right":t.canDrawHandUp()?e="up":t.canDrawHandDown()?e="down":t.canDrawZoomIn()?e="zoomIn":t.canDrawZoomOut()&&(e="zoomOut"),e},t.getContext=function(){return Jazz.ctx?Jazz.ctx:(Jazz.ctx=Jazz.canvas.getContext("2d"),Jazz.ctx)},t.getBlurredContext=function(){return Jazz.blurredCtx?Jazz.blurredCtx:(Jazz.blurredCtx=Jazz.blurredCanvas.getContext("2d"),Jazz.blurredCtx)}}(),function(){var t,e=this;t="undefined"!=typeof exports?exports:e.JazzEvents={},console.log("Loaded JazzEvents."),t.loop=function(e){Jazz.lastFrame=e,Jazz.hands=e.hands,Jazz.hands.length>0?JazzUI.showCanvas():(JazzUI.hideCanvas(),Jazz.handNavigation=null),Jazz.frameDigitCount=e.pointables.length,JazzUI.updateCanvas(),Jazz.frameDigitCount>=Jazz.LAST_VALID_FINGER?Jazz.simpleMode=!0:(Jazz.simpleMode=!1,Jazz.disableFingers===!1&&t.handleFingers()),Jazz.isGrabbing===!1&&JazzHands.isHoldingValidFinger()===!1&&t.handleNavigation(),t.handleGestureEvents(),t.handleProgressNav(),t.handleGrabRelease(),Jazz.event.frames(Jazz.lastFrame)},t.getFingersMap=function(t){return Jazz.lastFrame.pointablesMap?t?Jazz.lastFrame.pointablesMap[t]:Jazz.lastFrame.pointablesMap:void 0},t.handleNavigation=function(){return JazzHands.getCapturedDigits()<Jazz.LAST_VALID_FINGER?!1:(JazzHands.hasDetectedHand()===!0&&(JazzHands.isNewHandMotion()===!0&&(t.clearTimeoutForNav(),t.setTimeoutForNav()),JazzUI.getDetectedNav()===!1&&(t.clearTimeoutForNav(),Jazz.handNavigation=null),Jazz.handNavigation=JazzUI.getDetectedNav()),void 0)},t.handleGrabRelease=function(){return 0===Jazz.hands.length?(Jazz.isGrabbing===!0&&(Jazz.isGrabbing=!1,Jazz.event.release()),void 0):(JazzHands.getCapturedDigits()<=1?(Jazz.isGrabbing===!1&&Jazz.event.grab(),Jazz.isGrabbing=!0):1==Jazz.isGrabbing&&(Jazz.isGrabbing=!1,Jazz.event.release()),void 0)},t.handleProgressNav=function(){if(0!==Jazz.hands.length){var t=JazzConfig.threshold("up")-JazzConfig.threshold("down"),e=(JazzHands.palm("vertical")-JazzConfig.threshold("down"))/t;e>1&&(e=1),0>e&&(e=0);var i=1-e,n=JazzConfig.threshold("right")-JazzConfig.threshold("left"),a=(JazzHands.palm("horizontal")-JazzConfig.threshold("left"))/n;a>1&&(a=1),0>a&&(a=0);var o=1-a,r=JazzConfig.threshold("zoomIn")-JazzConfig.threshold("zoomOut"),s=(JazzHands.palm("depth")-JazzConfig.threshold("zoomOut"))/r;s>1&&(s=1),0>s&&(s=0);var l=1-s,c={up:parseInt(100*e),down:parseInt(100*i),right:parseInt(100*a),left:parseInt(100*o),zoomIn:parseInt(100*s),zoomOut:parseInt(100*l)};return Jazz.event.progress(c),c}},t.handleFingers=function(){JazzHands.isNewFingerCount()&&t.clearTimeoutForDigits(),JazzHands.isHoldingValidFinger()&&t.setTimeoutForDigits(),Jazz.lastDigitsFound=JazzHands.getCapturedDigits()},t.handleGestureEvents=function(){var t=Jazz.lastFrame.gestures;if(JazzHands.getCapturedDigits()>0&&t.length>0)for(var e=0;e<t.length;e++){var i=t[e];Jazz.lastGesture=i}else if(Jazz.lastGesture){var i=Jazz.lastGesture,n=!0;"circle"===i.type&&i.radius<100&&(n=!1),n===!0&&Jazz.event.gestures(Jazz.lastGesture),Jazz.lastGesture=null}},t.clearTimeoutForDigits=function(){Jazz.frameDigitCount>0&&(clearTimeout(Jazz.intervalTimer),Jazz.lastDigitsFound=Jazz.incr=Jazz.timerPercentage=0)},t.setTimeoutForDigits=function(){t.clearTimeoutForDigits(),Jazz.intervalTimer=setInterval(function(){Jazz.incr+=Jazz.WAIT_INTERVAL_TIMER,JazzUI.getTimerPercentage()>100&&(clearTimeout(Jazz.intervalTimer),Jazz.hands.length>0&&Jazz.lastDigitsFound<Jazz.LAST_VALID_FINGER&&Jazz.event.fingers(JazzHands.getCapturedDigits()))},Jazz.WAIT_INTERVAL_TIMER)},t.clearTimeoutForNav=function(){clearTimeout(Jazz.intervalTimer),Jazz.handNavigation=Jazz.incr=Jazz.timerPercentage=0},t.setTimeoutForNav=function(){t.clearTimeoutForNav(),Jazz.intervalTimer=setInterval(function(){Jazz.incr+=Jazz.WAIT_INTERVAL_TIMER,JazzUI.getTimerPercentage()>100&&(clearTimeout(Jazz.intervalTimer),Jazz.hands.length>0&&(Jazz.event.navigation(Jazz.handNavigation),Jazz.lastHand=Jazz.handNavigation,Jazz.repeatNavInterval=setTimeout(function(){Jazz.handNavigation===Jazz.lastHand&&(t.clearTimeoutForNav(),clearTimeout(Jazz.repeatNavInterval))},900)))},Jazz.WAIT_INTERVAL_TIMER)}}(),function(){var t,e=this;t="undefined"!=typeof exports?exports:e.JazzConfig={},console.log("Loaded JazzConfig."),t.configureFromOptions=function(e){Jazz.fillStyle="black",Jazz.LAST_VALID_FINGER=1,t.setupImages(),e&&(e.fillStyle&&(Jazz.arrowColor=Jazz.fillStyle=e.fillStyle),e.waitTimer&&(Jazz.WAIT_FINGER_MS=e.waitTimer),e.fingersText&&(Jazz.fingersText=Jazz.fingersText.concat(e.fingersText),Jazz.LAST_VALID_FINGER=e.fingersText.length+1),Jazz.simpleMode=Jazz.LAST_VALID_FINGER>1?!1:!0,void 0!=e.disableTimer&&e.disableTimer!=Jazz.disableTimer&&(Jazz.disableTimer=e.disableTimer),void 0!=e.disableZoom&&e.disableZoom!=Jazz.disableZoom&&(Jazz.disableZoom=e.disableZoom),void 0!=e.disableHelper&&e.disableHelper!=Jazz.disableHelper&&(Jazz.disableHelper=e.disableHelper),void 0!=e.disableFingers&&e.disableFingers!=Jazz.disableFingers&&(Jazz.disableFingers=e.disableFingers),e.opacity&&(Jazz.opacity=e.opacity))},t.setupImages=function(){var e=$("script[src*=jazz]").attr("src");e=e.replace("jazz.min.js","");var i=Jazz.filePath=e+"images/";Jazz.upArrow=new Image,Jazz.upArrow.src=i+Jazz.arrowColor+"_up_arrow.png",Jazz.downArrow=new Image,Jazz.downArrow.src=i+Jazz.arrowColor+"_down_arrow.png",Jazz.rightArrow=new Image,Jazz.rightArrow.src=i+Jazz.arrowColor+"_right_arrow.png",Jazz.leftArrow=new Image,Jazz.leftArrow.src=i+Jazz.arrowColor+"_left_arrow.png",Jazz.zoomIn=new Image,Jazz.zoomIn.src=i+Jazz.arrowColor+"_zoom_in.png",Jazz.zoomOut=new Image,Jazz.zoomOut.src=i+Jazz.arrowColor+"_zoom_out.png",t.setupHelperImages()},t.setupHelperImages=function(){var t=$("script[src*=jazz]").attr("src");t=t.replace("jazz.min.js","");var e=Jazz.filePath=t+"images/";Jazz.upHelperArrow=new Image,Jazz.upHelperArrow.src=e+"gray_up_arrow.png",Jazz.downHelperArrow=new Image,Jazz.downHelperArrow.src=e+"gray_down_arrow.png",Jazz.rightHelperArrow=new Image,Jazz.rightHelperArrow.src=e+"gray_right_arrow.png",Jazz.leftHelperArrow=new Image,Jazz.leftHelperArrow.src=e+"gray_left_arrow.png"},t.threshold=function(t){return"zoomIn"===t?-10:"zoomOut"===t?120:"up"===t?225:"down"===t?90:"left"===t?-80:"right"===t?80:void 0},Jazz.event={finger:function(){},navigation:function(){},gestures:function(){},frames:function(){},progress:function(){},grab:function(){},release:function(){}},Jazz.lastDigitsFound=0,Jazz.handNavigation="",Jazz.WAIT_FINGER_MS=700,Jazz.LAST_VALID_FINGER=2,Jazz.WAIT_INTERVAL_TIMER=40,Jazz.CIRCLE_RADIUS=1.6,Jazz.opacity=.45,Jazz.fingersText=[],Jazz.arrowColor="black",Jazz.incr=0,Jazz.lastFrame={},Jazz.hands=[],Jazz.timerPercentage=0,Jazz.simpleMode=!0,Jazz.disableZoom=!1,Jazz.disableHelper=!1,Jazz.disableTimer=!1,Jazz.disableFingers=!1,Jazz.showUI=!0,Jazz.isGrabbing=!1,Jazz.isReady=!1,Jazz.FIRST=0,Jazz.SECOND=1,Jazz.THIRD=2,Jazz.FOURTH=3}();